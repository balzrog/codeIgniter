<?php
/**
 * Created by PhpStorm.
 * User: Balzrog
 * Date: 18/03/2016
 * Time: 14:24
 */
?>

<div class="col-lg">
    <div class="col-sm-2">
        <div class="sidebar-nav" id="fixedtop">
            <div class="navbar navbar-default" role="navigation">
                <div class="navbar-collapse collapse sidebar-navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li class="navbar-brand">Barre d'administration</li>
                        <li><a href="#Projets"><i class="fa fa-leanpub"></i> Projets</a></li>
                        <li><a href="#Formations"><i class="fa fa-university"></i> Formations</a></li>
                        <li><a href="#Compétences"><i class="fa fa-check"></i> Compétences</a></li>
                        <li><a href="#Expériences"><i class="fa fa-cogs"></i> Expériences</a></li>
                        <li><a href="#Contact"<i class="fa fa-user"></i> Contact</a></li>
                        <li><a href="#"><i class="fa fa-arrow-up"></i> Retour en haut</a></li>
                    </ul>
                </div><!--/.nav-collapse -->
            </div>
        </div>
    </div>
</div>

<section class="container">
    <section id="Projets">
       <div class="panel panel-default">
            <div class="panel-heading"><i class="fa fa-leanpub"></i> Mes projets</div>
            <div class="panel-body">
                <?= "Voici mes projets" ?>
                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."

                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."

                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."

                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."

                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."

                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
            </div>
        </div>
    </section>
    <section id="Formations">
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-university"></i> Mes formations
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-lg-6 col-md-8 col-sm-12 col-xs-12 panel-custom-height">
                        <div class="panel panel-primary training-cards">
                            <div class="panel-heading" style="padding: 5px;">
                                <h3 class="panel-title panel-custom-title pull-left">
                                    BTS Commerce International
                                </h3>
                                <button class="btn btn-default"><i class="fa fa-pencil-square"></i></button>
                                <button class="btn btn-default"><i class="fa fa-trash"></i></button>
                                <button class="btn btn-default training-up-order"><i class="fa fa-arrow-up"></i></button>
                                <button class="btn btn-default"><i class="fa fa-arrow-down"></i></button>
                                <div class="clearfix"></div>
                            </div>
                            <div class="panel-body">
                                <ul class="list-group" id="list-group-admin" style="margin-bottom: 0;">
                                    <li class="list-group-item"><b>Diplôme :</b> <span class="training-data-diploma">Bac +2</span></li>
                                    <li class="list-group-item"><b>Année :</b> <span class="training-data-year">2014</span></li>
                                    <li class="list-group-item"><b>Ville :</b> <span class="training-data-city">Bordeaux</span></li>
                                    <li class="list-group-item">
                                        <b>Descriptif :</b>
                                        <br>
                                        <p class="training-data-details">Le titulaire de ce BTS est un professionnel de l'import-export travaillant généralement pour une société de négoce.</p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="panel panel-primary training-cards">
                            <div class="panel-heading" style="padding: 5px;">
                                <h3 class="panel-title panel-custom-title pull-left">
                                    Baccalauréat Scientifique
                                </h3>
                                <button class="btn btn-default"><i class="fa fa-pencil-square"></i></button>
                                <button class="btn btn-default"><i class="fa fa-trash"></i></button>
                                <button class="btn btn-default training-up-order"><i class="fa fa-arrow-up"></i></button>
                                <button class="btn btn-default"><i class="fa fa-arrow-down"></i></button>
                                <div class="clearfix"></div>
                            </div>
                            <div class="panel-body">
                                <ul class="list-group" id="list-group-admin" style="margin-bottom: 0;">
                                    <li class="list-group-item "><b>Diplôme :</b> Bac +2</li>
                                    <li class="list-group-item"><b>Année :</b> 2014</li>
                                    <li class="list-group-item"><b>Ville :</b> Bordeaux</li>
                                    <li class="list-group-item">
                                        <b>Descriptif :</b>
                                        <br>
                                        <p>Le titulaire de ce BTS est un professionnel de l'import-export travaillant généralement pour une société de négoce.</p>
                                    </li>
                                    <li style="display: none;">1</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-8 col-sm-9 col-xs-12">
                        <div class="panel-body">
                            <div class="panel panel-default">
                                <div class="panel-body">
                                    <form id="add_training_form">
                                        <fieldset>
                                            <legend>Ajouter une formation</legend>
                                            <div class="form-group">
                                                <label for="company" class="control-label">Titre de la formation</label>
                                                <input type="text" name="training" id="training" class="form-control" placeholder="Formation">
                                            </div>
                                            <div class="form-group">
                                                <label for="diploma" class="control-label">Diplôme</label>
                                                <input type="text" name="diploma" id="diploma" class="form-control" placeholder="Diplôme">
                                            </div>
                                            <div class="form-group">
                                                <label for="year" class="control-label">Année</label>
                                                <input type="text" name="year" id="year" class="form-control" placeholder="Année">
                                            </div>
                                            <div class="form-group">
                                                <label for="city" class="control-label">Ville</label>
                                                <input type="text" name="city" id="city" class="form-control" placeholder="Ville">
                                            </div>
                                            <div class="form-group">
                                                <label for="details" class="control-label">Descriptif</label>
                                                <textarea class="form-control" name="details" id="details" rows="3"></textarea>
                                            </div>
                                            <div class="form-group">
                                                <label for="visible" class="control-label">Visible  <input type="checkbox" name="visible" id="visible"></label>
                                            </div>
                                            <button type="submit" id="submit_training" class="btn btn-primary pull-right">Ajouter</button>
                                        </fieldset>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="Compétences">
        <div class="panel panel-default">
            <div class="panel-heading"><i class="fa fa-check"></i> Mes compétences</div>
            <div class="panel-body">
                <div class="panel panel-default col-lg-3" id="panelSkill">
                    <div class="panel-heading"> Catégorie 1</div>
                        <ul class="list-group">
                            <li class="list-group-item"> Compétence 1 </li>
                            <li class="list-group-item"> Compétence 2 </li>
                        </ul>
                </div>
                <div class="panel panel-default col-lg-3" id="panelSkill">
                    <div class="panel-heading"> Catégorie 2</div>
                        <ul class="list-group">
                            <li class="list-group-item"> Compétence 1 </li>
                            <li class="list-group-item"> Compétence 2 </li>
                        </ul>
                </div>
                <div class="panel panel-default col-lg-3" id="panelSkill">
                    <div class="panel-heading"> Catégorie 3</div>
                        <ul class="list-group">
                            <li class="list-group-item"> Compétence 1 </li>
                            <li class="list-group-item"> Compétence 2 </li>
                        </ul>
                </div>
                <div class="panel panel-default col-lg-3" id="panelSkill">
                    <div class="panel-heading"> Catégorie 4</div>
                        <ul class="list-group">
                            <li class="list-group-item"> Compétence 1 </li>
                            <li class="list-group-item"> Compétence 2 </li>
                        </ul>
                </div>
            </div>
        </div>
    </section>
     <section id="Expériences">
        <div class="panel panel-default">
            <div class="panel-heading"><i class="fa fa-cogs"></i> Mes expériences</div>
            <div class="panel-body">
                <?= "Voici mes expériences" ?>
                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."

                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."

                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."

                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
            </div>
        </div>
    </section>
    <section id="Contact">
        <div class="panel panel-default">
            <div class="panel-heading"><i class="fa fa-user"></i> Mes informations personnelles</div>
            <div class="panel-body">
                <?=form_open()?>
                <?=form_fieldset('Informations personnelles')?>
                <?php foreach($results as $result) : ;?>
                <div class="col-lg-6">
                    <div class="form-group">
                        <?=form_label('Nom', 'name', array('class' => 'control-label'))?>
                        <?=form_input(array('value' => $result['nom'],'name' => 'name', 'class' => 'form-control', 'id' => 'name', 'placeholder' => '', 'tabindex' => '1' ))?>
                    </div>
                    <div class="form-group">
                        <?=form_label('Prénom', 'firstname', array('class' => 'control-label'))?>
                        <?=form_input(array('value' => $result['prenom'],'name' => 'firstname', 'class' => 'form-control', 'id' => 'firstname', 'placeholder' => '', 'tabindex' => '2'))?>
                    </div>
                    <div class="form-group">
                        <?=form_label('Téléphone', 'phone', array('class' => 'control-label'))?>
                        <?=form_input(array('value' => $result['telephone'],'name' => 'phone', 'class' => 'form-control', 'id' => 'phone', 'placeholder' => '', 'tabindex' => '3'))?>
                    </div>
                    <div class="form-group">
                        <?=form_label('Adresse email', 'mail', array('class' => 'control-label'))?>
                        <?=form_input(array('value' => $result['mail'],'name' => 'mail', 'class' => 'form-control', 'id' => 'mail', 'placeholder' => '', 'tabindex' => '6'))?>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="form-group">
                        <?=form_label('Adresse', 'address', array('class' => 'control-label'))?>
                        <?=form_input(array('value' => $result['adresse'],'name' => 'address', 'class' => 'form-control', 'id' => 'address', 'placeholder' => '', 'tabindex' => '7'))?>
                    </div>
                    <div class="form-group">
                        <?=form_label('Code postal', 'zipcode', array('class' => 'control-label'))?>
                        <?=form_input(array('value' => $result['code_postal'],'name' => 'zipcode', 'class' => 'form-control', 'id' => 'zipcode', 'placeholder' => '', 'tabindex' => '8'))?>
                    </div>
                    <div class="form-group">
                        <?=form_label('Ville', 'city', array('class' => 'control-label'))?>
                        <?=form_input(array('value' => $result['ville'],'name' => 'city', 'class' => 'form-control', 'id' => 'city', 'placeholder' => '', 'tabindex' => '9'))?>
                    </div>
                    <div class="form-group">
                        <?=form_label('Complément d\'adresse', 'addressextra', array('class' => 'control-label'))?>
                        <?=form_input(array('value' => $result['complement'],'name' => 'addressextra', 'class' => 'form-control', 'id' => 'addressextra', 'placeholder' => '', 'tabindex' => '10'))?>
                    </div>
                    <?=form_submit('', 'Modifier', array('class' => 'btn btn-default pull-right', 'tabindex' => '11'))?>
                </div>
                <?php endforeach ;?>
                <?=form_fieldset_close()?>
                <?=form_close()?>

                <div class="form-group">
                    <label class="col-md-1 control-label">Nom</label>
                    <div class="col-md-9">
                        <label class="radio-inline">
                            <input  name="name_visible" type="radio">
                            Visible
                        </label>
                        <label class="radio-inline">
                            <input name="name_visible" type="radio">
                            Invisible
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </section>
</section>

<script>
    var divCardLayout = '<div class="panel-heading" style="padding: 5px;"> <h3 class="panel-title panel-custom-title pull-left"></h3> <button class="btn btn-default"><i class="fa fa-pencil-square"></i></button> <button class="btn btn-default"><i class="fa fa-trash"></i></button> <button class="btn btn-default training-up-order"><i class="fa fa-arrow-up"></i></button> <button class="btn btn-default"><i class="fa fa-arrow-down"></i></button> <div class="clearfix"></div> </div> <div class="panel-body"> <ul class="list-group" id="list-group-admin" style="margin-bottom: 0;"> <li class="list-group-item "><b>Diplôme :</b> <span class="training-data-diploma"></span></li> <li class="list-group-item"><b>Année :</b> <span class="training-data-year"></span></li> <li class="list-group-item"><b>Ville :</b> <span class="training-data-city"></span></li> <li class="list-group-item"> <b>Descriptif :</b> <br> <p class="training-data-details"></p> </li> <li class="training-data-visible" style="display: none;"> </li> <li class="training-data-order" style="display: none;"> </li> </ul> </div>';
    var submitTrainingButton = document.querySelector('#submit_training');
    var upOrderButton = document.querySelector("#training-up-order");

    var newCard = "";

    submitTrainingButton.addEventListener("click", function(e) {
        e.preventDefault();
        var cardsParent = document.querySelector('.panel-custom-height');
        var newCard = document.createElement('div');
        newCard.className = "panel panel-primary training-cards";
        newCard.innerHTML = divCardLayout;
        cardsParent.appendChild(newCard);

        //Form
        var formTraining = document.querySelector("#add_training_form");

        //Card
        newCard.querySelector(".panel-custom-title").innerText = formTraining.training.value;
        newCard.querySelector(".training-data-diploma").innerText = formTraining.diploma.value;
        newCard.querySelector(".training-data-year").innerText = formTraining.year.value;
        newCard.querySelector(".training-data-city").innerText = formTraining.city.value;
        newCard.querySelector(".training-data-details").innerText = formTraining.details.value;
        //newCard.querySelector(".training-data-visible");
        //newCard.querySelector(".training-data-order");

        //var trainingVisible = formTraining.visible.value;

        var xhr = new XMLHttpRequest();
        var form = new FormData(formTraining);

        xhr.open("POST", "/test.php");
        xhr.send(form);

        xhr.addEventListener("load", function(){
            //console.dir(xhr.responseText);
            console.log(newCard);

            //querySelector span id
        }, false);



        attachEventToCard(newCard);

    }, false);

    function upCard(card) {
        var movedCard = card.cloneNode(true);
        attachEventToCard(movedCard);
        if(card.previousElementSibling) {
            card.parentNode.insertBefore(movedCard, card.previousElementSibling);
            card.parentNode.removeChild(card);
        }

    }

    function downCard(card) {
        var movedCard = card.cloneCard(true);
        attachEvenToCard(movedCard);

        card.parentNode.insertBefore(movedCard, card.nextElementSibling);
    }

    function attachEventToCard(newCard) {
        //console.dir(newCard);
        newCard.querySelector(".training-up-order").addEventListener("click", function(){ upCard(newCard); }, false);
    }

    function init() {
        var allCards = document.querySelectorAll(".training-cards");
        for(var i = 0; allCards.length > i; i++) {
            attachEventToCard(allCards[i]);
        }
    }

    init();

</script>

<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>